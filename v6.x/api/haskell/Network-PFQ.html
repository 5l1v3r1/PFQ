<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.PFQ</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Network-PFQ.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">PFQ Library v6.0</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>Nicola Bonelli (c) 2012-2015-16</td></tr><tr><th>License</th><td>GPL</td></tr><tr><th>Maintainer</th><td>nicola@pfq.io</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Network.PFQ</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Types</a></li><li><a href="#g:2">Socket and Groups</a></li><li><a href="#g:3">Socket control</a></li><li><a href="#g:4">Socket parameters</a></li><li><a href="#g:5">Packet capture</a></li><li><a href="#g:6">Packet transmission</a></li><li><a href="#g:7">pfq-lang</a></li><li><a href="#g:8">Statistics and counters</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>The <code><a href="Network.html#v:PFQ">PFQ</a></code> module is a low level binding to the
 functions in <code>libpfq</code>.  See <a href="https://github.com/pfq/PFQ/wiki">https://github.com/pfq/PFQ/wiki</a> for more
 information.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:PFqTag">PFqTag</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Statistics">Statistics</a> = <a href="#v:Statistics">Statistics</a> {<ul class="subs"><li><a href="#v:sReceived">sReceived</a> :: Integer</li><li><a href="#v:sLost">sLost</a> :: Integer</li><li><a href="#v:sDropped">sDropped</a> :: Integer</li><li><a href="#v:sSent">sSent</a> :: Integer</li><li><a href="#v:sDiscard">sDiscard</a> :: Integer</li><li><a href="#v:sFailure">sFailure</a> :: Integer</li><li><a href="#v:sForward">sForward</a> :: Integer</li><li><a href="#v:sKernel">sKernel</a> :: Integer</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:NetQueue">NetQueue</a> = <a href="#v:NetQueue">NetQueue</a> {<ul class="subs"><li><a href="#v:qPtr">qPtr</a> :: Ptr <a href="Network-PFQ.html#t:PktHdr">PktHdr</a></li><li><a href="#v:qLen">qLen</a> :: !Word64</li><li><a href="#v:qSlotSize">qSlotSize</a> :: !Word64</li><li><a href="#v:qIndex">qIndex</a> :: !Word32</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Packet">Packet</a> = <a href="#v:Packet">Packet</a> {<ul class="subs"><li><a href="#v:pHdr">pHdr</a> :: Ptr <a href="Network-PFQ.html#t:PktHdr">PktHdr</a></li><li><a href="#v:pData">pData</a> :: Ptr Word8</li><li><a href="#v:pIndex">pIndex</a> :: !Word32</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:PktHdr">PktHdr</a> = <a href="#v:PktHdr">PktHdr</a> {<ul class="subs"><li><a href="#v:hMark">hMark</a> :: !Word32</li><li><a href="#v:hState">hState</a> :: !Word32</li><li><a href="#v:hSec">hSec</a> :: !Word32</li><li><a href="#v:hNsec">hNsec</a> :: !Word32</li><li><a href="#v:hIfIndex">hIfIndex</a> :: !Word32</li><li><a href="#v:hGid">hGid</a> :: !Word32</li><li><a href="#v:hLen">hLen</a> :: !Word16</li><li><a href="#v:hCapLen">hCapLen</a> :: !Word16</li><li><a href="#v:hTci">hTci</a> :: !Word16</li><li><a href="#v:hHwQueue">hHwQueue</a> :: !Word8</li><li><a href="#v:hCommit">hCommit</a> :: !Word8</li></ul>}</li><li class="src short"><span class="keyword">type</span> <a href="#t:Callback">Callback</a> = <a href="Network-PFQ.html#t:PktHdr">PktHdr</a> -&gt; Ptr Word8 -&gt; IO ()</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ClassMask">ClassMask</a> = <a href="#v:ClassMask">ClassMask</a> {<ul class="subs"><li><a href="#v:getClassMask">getClassMask</a> :: CULong</li></ul>}</li><li class="src short"><a href="#v:class_default">class_default</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></li><li class="src short"><a href="#v:class_user_plane">class_user_plane</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></li><li class="src short"><a href="#v:class_control_plane">class_control_plane</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></li><li class="src short"><a href="#v:class_control">class_control</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></li><li class="src short"><a href="#v:class_any">class_any</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:GroupPolicy">GroupPolicy</a> = <a href="#v:GroupPolicy">GroupPolicy</a> {<ul class="subs"><li><a href="#v:getGroupPolicy">getGroupPolicy</a> :: CInt</li></ul>}</li><li class="src short"><a href="#v:policy_undefined">policy_undefined</a> :: <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></li><li class="src short"><a href="#v:policy_priv">policy_priv</a> :: <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></li><li class="src short"><a href="#v:policy_restricted">policy_restricted</a> :: <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></li><li class="src short"><a href="#v:policy_shared">policy_shared</a> :: <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></li><li class="src short"><span class="keyword">newtype</span> <a href="#t:PFqConstant">PFqConstant</a> = <a href="#v:PFqConstant">PFqConstant</a> {<ul class="subs"><li><a href="#v:getConstant">getConstant</a> :: Int</li></ul>}</li><li class="src short"><a href="#v:any_device">any_device</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></li><li class="src short"><a href="#v:any_queue">any_queue</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></li><li class="src short"><a href="#v:any_group">any_group</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></li><li class="src short"><a href="#v:version_code">version_code</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></li><li class="src short"><a href="#v:major_version">major_version</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></li><li class="src short"><a href="#v:minor_version">minor_version</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></li><li class="src short"><a href="#v:patchlevel_version">patchlevel_version</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></li><li class="src short"><a href="#v:version">version</a> :: String</li><li class="src short"><span class="keyword">data</span> <a href="#t:SocketParams">SocketParams</a> = <a href="#v:SocketParams">SocketParams</a> {<ul class="subs"><li><a href="#v:parCaplen">parCaplen</a> :: Int</li><li><a href="#v:parRxSlots">parRxSlots</a> :: Int</li><li><a href="#v:parTxSlots">parTxSlots</a> :: Int</li><li><a href="#v:parPolicy">parPolicy</a> :: <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></li><li><a href="#v:parClass">parClass</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></li></ul>}</li><li class="src short"><a href="#v:defaultSocketParams">defaultSocketParams</a> :: <a href="Network-PFQ.html#t:SocketParams">SocketParams</a></li><li class="src short"><a href="#v:open">open</a> :: Int -&gt; Int -&gt; Int -&gt; IO (ForeignPtr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a>)</li><li class="src short"><a href="#v:openNoGroup">openNoGroup</a> :: Int -&gt; Int -&gt; Int -&gt; IO (ForeignPtr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a>)</li><li class="src short"><a href="#v:openGroup">openGroup</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a> -&gt; <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a> -&gt; Int -&gt; Int -&gt; Int -&gt; IO (ForeignPtr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a>)</li><li class="src short"><a href="#v:openParam">openParam</a> :: <a href="Network-PFQ.html#t:SocketParams">SocketParams</a> -&gt; IO (ForeignPtr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a>)</li><li class="src short"><a href="#v:close">close</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO ()</li><li class="src short"><a href="#v:enable">enable</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO ()</li><li class="src short"><a href="#v:disable">disable</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO ()</li><li class="src short"><a href="#v:getId">getId</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</li><li class="src short"><a href="#v:getGroupId">getGroupId</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</li><li class="src short"><a href="#v:isEnabled">isEnabled</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Bool</li><li class="src short"><a href="#v:joinGroup">joinGroup</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; <a href="Network-PFQ.html#t:ClassMask">ClassMask</a> -&gt; <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a> -&gt; IO ()</li><li class="src short"><a href="#v:leaveGroup">leaveGroup</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:bind">bind</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; String -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:bindGroup">bindGroup</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; String -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:unbind">unbind</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; String -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:unbindGroup">unbindGroup</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; String -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:egressBind">egressBind</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; String -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:egressUnbind">egressUnbind</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO ()</li><li class="src short"><a href="#v:timestampingEnable">timestampingEnable</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Bool -&gt; IO ()</li><li class="src short"><a href="#v:isTimestampingEnabled">isTimestampingEnabled</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Bool</li><li class="src short"><a href="#v:setWeight">setWeight</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:getWeight">getWeight</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</li><li class="src short"><a href="#v:setPromisc">setPromisc</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; String -&gt; Bool -&gt; IO ()</li><li class="src short"><a href="#v:getCaplen">getCaplen</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</li><li class="src short"><a href="#v:setCaplen">setCaplen</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:getRxSlots">getRxSlots</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</li><li class="src short"><a href="#v:setRxSlots">setRxSlots</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:getRxSlotSize">getRxSlotSize</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</li><li class="src short"><a href="#v:getTxSlots">getTxSlots</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</li><li class="src short"><a href="#v:setTxSlots">setTxSlots</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:getMaxlen">getMaxlen</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</li><li class="src short"><a href="#v:read">read</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; IO <a href="Network-PFQ.html#t:NetQueue">NetQueue</a></li><li class="src short"><a href="#v:dispatch">dispatch</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; <a href="Network-PFQ.html#t:Callback">Callback</a> -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:getPackets">getPackets</a> :: <a href="Network-PFQ.html#t:NetQueue">NetQueue</a> -&gt; IO [<a href="Network-PFQ.html#t:Packet">Packet</a>]</li><li class="src short"><a href="#v:getPacketHeader">getPacketHeader</a> :: <a href="Network-PFQ.html#t:Packet">Packet</a> -&gt; IO <a href="Network-PFQ.html#t:PktHdr">PktHdr</a></li><li class="src short"><a href="#v:isPacketReady">isPacketReady</a> :: <a href="Network-PFQ.html#t:Packet">Packet</a> -&gt; IO Bool</li><li class="src short"><a href="#v:waitForPacket">waitForPacket</a> :: <a href="Network-PFQ.html#t:Packet">Packet</a> -&gt; IO ()</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:VlanTag">VlanTag</a> = <a href="#v:VlanTag">VlanTag</a> {<ul class="subs"><li><a href="#v:getVid">getVid</a> :: CInt</li></ul>}</li><li class="src short"><a href="#v:vlan_untag">vlan_untag</a> :: <a href="Network-PFQ.html#t:VlanTag">VlanTag</a></li><li class="src short"><a href="#v:vlan_anytag">vlan_anytag</a> :: <a href="Network-PFQ.html#t:VlanTag">VlanTag</a></li><li class="src short"><a href="#v:vlanFiltersEnable">vlanFiltersEnable</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; Bool -&gt; IO ()</li><li class="src short"><a href="#v:vlanSetFilter">vlanSetFilter</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; <a href="Network-PFQ.html#t:VlanTag">VlanTag</a> -&gt; IO ()</li><li class="src short"><a href="#v:vlanResetFilter">vlanResetFilter</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; <a href="Network-PFQ.html#t:VlanTag">VlanTag</a> -&gt; IO ()</li><li class="src short"><a href="#v:send">send</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; ByteString -&gt; Int -&gt; Int -&gt; IO Bool</li><li class="src short"><a href="#v:sendTo">sendTo</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; ByteString -&gt; Int -&gt; Int -&gt; Int -&gt; Int -&gt; IO Bool</li><li class="src short"><a href="#v:sendAsync">sendAsync</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; ByteString -&gt; Int -&gt; IO Bool</li><li class="src short"><a href="#v:sendAt">sendAt</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; ByteString -&gt; TimeSpec -&gt; Int -&gt; IO Bool</li><li class="src short"><a href="#v:transmitQueue">transmitQueue</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:bindTx">bindTx</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; String -&gt; Int -&gt; Int -&gt; IO ()</li><li class="src short"><a href="#v:unbindTx">unbindTx</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO ()</li><li class="src short"><a href="#v:setGroupComputation">setGroupComputation</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; <a href="Network-PFQ-Lang.html#t:Function">Function</a> (<a href="Network-PFQ-Lang.html#t:Qbuff">Qbuff</a> -&gt; <a href="Network-PFQ-Lang.html#t:Action">Action</a> <a href="Network-PFQ-Lang.html#t:Qbuff">Qbuff</a>) -&gt; IO ()</li><li class="src short"><a href="#v:setGroupComputationFromString">setGroupComputationFromString</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:setGroupComputationFromFile">setGroupComputationFromFile</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; FilePath -&gt; IO ()</li><li class="src short"><a href="#v:setGroupComputationFromDescr">setGroupComputationFromDescr</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; [<a href="Network-PFQ-Lang.html#t:FunctionDescr">FunctionDescr</a>] -&gt; IO ()</li><li class="src short"><a href="#v:setGroupComputationFromJSON">setGroupComputationFromJSON</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; String -&gt; IO ()</li><li class="src short"><a href="#v:getStats">getStats</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO <a href="Network-PFQ.html#t:Statistics">Statistics</a></li><li class="src short"><a href="#v:getGroupStats">getGroupStats</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; IO <a href="Network-PFQ.html#t:Statistics">Statistics</a></li><li class="src short"><a href="#v:getGroupCounters">getGroupCounters</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; Int -&gt; IO Counters</li></ul></div><div id="interface"><h1 id="g:1">Types</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:PFqTag" class="def">PFqTag</a></p><div class="doc"><p>Packet capture handle.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Statistics" class="def">Statistics</a></p><div class="doc"><p>PFQ statistics.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Statistics" class="def">Statistics</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:sReceived" class="def">sReceived</a> :: Integer</dt><dd class="doc"><p>packets received</p></dd><dt class="src"><a name="v:sLost" class="def">sLost</a> :: Integer</dt><dd class="doc"><p>packets lost</p></dd><dt class="src"><a name="v:sDropped" class="def">sDropped</a> :: Integer</dt><dd class="doc"><p>packets dropped</p></dd><dt class="src"><a name="v:sSent" class="def">sSent</a> :: Integer</dt><dd class="doc"><p>packets sent</p></dd><dt class="src"><a name="v:sDiscard" class="def">sDiscard</a> :: Integer</dt><dd class="doc"><p>packets discarded</p></dd><dt class="src"><a name="v:sFailure" class="def">sFailure</a> :: Integer</dt><dd class="doc"><p>packets Tx failure</p></dd><dt class="src"><a name="v:sForward" class="def">sForward</a> :: Integer</dt><dd class="doc"><p>packets forwarded to devices</p></dd><dt class="src"><a name="v:sKernel" class="def">sKernel</a> :: Integer</dt><dd class="doc"><p>packets forwarded to kernel</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Statistics" class="caption collapser" onclick="toggleSection('i:Statistics')">Instances</p><div id="section.i:Statistics" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Network-PFQ.html#t:Statistics">Statistics</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Network-PFQ.html#t:Statistics">Statistics</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:NetQueue" class="def">NetQueue</a></p><div class="doc"><p>Capture Queue handle.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:NetQueue" class="def">NetQueue</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:qPtr" class="def">qPtr</a> :: Ptr <a href="Network-PFQ.html#t:PktHdr">PktHdr</a></dt><dd class="doc"><p>pointer to the memory mapped queue</p></dd><dt class="src"><a name="v:qLen" class="def">qLen</a> :: !Word64</dt><dd class="doc"><p>queue length</p></dd><dt class="src"><a name="v:qSlotSize" class="def">qSlotSize</a> :: !Word64</dt><dd class="doc"><p>size of a slot = pfq header + packet</p></dd><dt class="src"><a name="v:qIndex" class="def">qIndex</a> :: !Word32</dt><dd class="doc"><p>index of the queue</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:NetQueue" class="caption collapser" onclick="toggleSection('i:NetQueue')">Instances</p><div id="section.i:NetQueue" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Network-PFQ.html#t:NetQueue">NetQueue</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Network-PFQ.html#t:NetQueue">NetQueue</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Packet" class="def">Packet</a></p><div class="doc"><p>Descriptor of the packet.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Packet" class="def">Packet</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:pHdr" class="def">pHdr</a> :: Ptr <a href="Network-PFQ.html#t:PktHdr">PktHdr</a></dt><dd class="doc"><p>pointer to pfq packet header</p></dd><dt class="src"><a name="v:pData" class="def">pData</a> :: Ptr Word8</dt><dd class="doc"><p>pointer to the packet data</p></dd><dt class="src"><a name="v:pIndex" class="def">pIndex</a> :: !Word32</dt><dd class="doc"><p>index of the queue</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Packet" class="caption collapser" onclick="toggleSection('i:Packet')">Instances</p><div id="section.i:Packet" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Network-PFQ.html#t:Packet">Packet</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Network-PFQ.html#t:Packet">Packet</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:PktHdr" class="def">PktHdr</a></p><div class="doc"><p>PFQ packet header.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:PktHdr" class="def">PktHdr</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:hMark" class="def">hMark</a> :: !Word32</dt><dd class="doc"><p>skb 32-bits mark</p></dd><dt class="src"><a name="v:hState" class="def">hState</a> :: !Word32</dt><dd class="doc"><p>opaque 32-bits state</p></dd><dt class="src"><a name="v:hSec" class="def">hSec</a> :: !Word32</dt><dd class="doc"><p>timestamp (seconds)</p></dd><dt class="src"><a name="v:hNsec" class="def">hNsec</a> :: !Word32</dt><dd class="doc"><p>timestamp (nanoseconds)</p></dd><dt class="src"><a name="v:hIfIndex" class="def">hIfIndex</a> :: !Word32</dt><dd class="doc"><p>interface index</p></dd><dt class="src"><a name="v:hGid" class="def">hGid</a> :: !Word32</dt><dd class="doc"><p>group id</p></dd><dt class="src"><a name="v:hLen" class="def">hLen</a> :: !Word16</dt><dd class="doc"><p>packet length (wire size)</p></dd><dt class="src"><a name="v:hCapLen" class="def">hCapLen</a> :: !Word16</dt><dd class="doc"><p>capture length</p></dd><dt class="src"><a name="v:hTci" class="def">hTci</a> :: !Word16</dt><dd class="doc"><p>vlan tci</p></dd><dt class="src"><a name="v:hHwQueue" class="def">hHwQueue</a> :: !Word8</dt><dd class="doc"><p>hardware queue index</p></dd><dt class="src"><a name="v:hCommit" class="def">hCommit</a> :: !Word8</dt><dd class="doc"><p>commit bit</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:PktHdr" class="caption collapser" onclick="toggleSection('i:PktHdr')">Instances</p><div id="section.i:PktHdr" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Network-PFQ.html#t:PktHdr">PktHdr</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Network-PFQ.html#t:PktHdr">PktHdr</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Callback" class="def">Callback</a> = <a href="Network-PFQ.html#t:PktHdr">PktHdr</a> -&gt; Ptr Word8 -&gt; IO ()</p><div class="doc"><p>The type of the callback function passed to <code><a href="Network-PFQ.html#v:dispatch">dispatch</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:ClassMask" class="def">ClassMask</a></p><div class="doc"><p>ClassMask type.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ClassMask" class="def">ClassMask</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:getClassMask" class="def">getClassMask</a> :: CULong</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:ClassMask" class="caption collapser" onclick="toggleSection('i:ClassMask')">Instances</p><div id="section.i:ClassMask" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Read <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Monoid <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></span></td><td class="doc"><p>Monoid instance</p></td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:class_default" class="def">class_default</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></p></div><div class="top"><p class="src"><a name="v:class_user_plane" class="def">class_user_plane</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></p></div><div class="top"><p class="src"><a name="v:class_control_plane" class="def">class_control_plane</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></p></div><div class="top"><p class="src"><a name="v:class_control" class="def">class_control</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></p></div><div class="top"><p class="src"><a name="v:class_any" class="def">class_any</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:GroupPolicy" class="def">GroupPolicy</a></p><div class="doc"><p>Group policy type.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:GroupPolicy" class="def">GroupPolicy</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:getGroupPolicy" class="def">getGroupPolicy</a> :: CInt</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:GroupPolicy" class="caption collapser" onclick="toggleSection('i:GroupPolicy')">Instances</p><div id="section.i:GroupPolicy" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Read <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:policy_undefined" class="def">policy_undefined</a> :: <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></p></div><div class="top"><p class="src"><a name="v:policy_priv" class="def">policy_priv</a> :: <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></p></div><div class="top"><p class="src"><a name="v:policy_restricted" class="def">policy_restricted</a> :: <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></p></div><div class="top"><p class="src"><a name="v:policy_shared" class="def">policy_shared</a> :: <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:PFqConstant" class="def">PFqConstant</a></p><div class="doc"><p>Generic pfq constant.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:PFqConstant" class="def">PFqConstant</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:getConstant" class="def">getConstant</a> :: Int</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:PFqConstant" class="caption collapser" onclick="toggleSection('i:PFqConstant')">Instances</p><div id="section.i:PFqConstant" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Read <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:any_device" class="def">any_device</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></p></div><div class="top"><p class="src"><a name="v:any_queue" class="def">any_queue</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></p></div><div class="top"><p class="src"><a name="v:any_group" class="def">any_group</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></p></div><div class="top"><p class="src"><a name="v:version_code" class="def">version_code</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></p></div><div class="top"><p class="src"><a name="v:major_version" class="def">major_version</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></p></div><div class="top"><p class="src"><a name="v:minor_version" class="def">minor_version</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></p></div><div class="top"><p class="src"><a name="v:patchlevel_version" class="def">patchlevel_version</a> :: <a href="Network-PFQ.html#t:PFqConstant">PFqConstant</a></p></div><div class="top"><p class="src"><a name="v:version" class="def">version</a> :: String</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:SocketParams" class="def">SocketParams</a></p><div class="doc"><p>SocketParams data type.</p><p>To be passed as argument to <code><a href="Network-PFQ.html#v:openParam">openParam</a></code> function.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:SocketParams" class="def">SocketParams</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:parCaplen" class="def">parCaplen</a> :: Int</dt><dd class="doc"><p>capture len</p></dd><dt class="src"><a name="v:parRxSlots" class="def">parRxSlots</a> :: Int</dt><dd class="doc"><p>socket Rx queue length</p></dd><dt class="src"><a name="v:parTxSlots" class="def">parTxSlots</a> :: Int</dt><dd class="doc"><p>socket Tx queue length</p></dd><dt class="src"><a name="v:parPolicy" class="def">parPolicy</a> :: <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></dt><dd class="doc"><p>default group policy: policy_undefined means no group</p></dd><dt class="src"><a name="v:parClass" class="def">parClass</a> :: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></dt><dd class="doc"><p>socket class</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:SocketParams" class="caption collapser" onclick="toggleSection('i:SocketParams')">Instances</p><div id="section.i:SocketParams" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Network-PFQ.html#t:SocketParams">SocketParams</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Network-PFQ.html#t:SocketParams">SocketParams</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:defaultSocketParams" class="def">defaultSocketParams</a> :: <a href="Network-PFQ.html#t:SocketParams">SocketParams</a></p><div class="doc"><p>Default values of Socket parameters.</p></div></div><h1 id="g:2">Socket and Groups</h1><div class="top"><p class="src"><a name="v:open" class="def">open</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Int</td><td class="doc"><p>caplen</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>number of Rx slots</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>number of Tx slots</p></td></tr><tr><td class="src">-&gt; IO (ForeignPtr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Open a socket and create a new private group.</p><p>The default values for class mask and group policy are <code><a href="Network-PFQ.html#v:class_default">class_default</a></code> and
 <code><a href="Network-PFQ.html#v:policy_priv">policy_priv</a></code>, respectively.</p></div></div><div class="top"><p class="src"><a name="v:openNoGroup" class="def">openNoGroup</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Int</td><td class="doc"><p>caplen</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>number of Rx slots</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>number of Tx slots</p></td></tr><tr><td class="src">-&gt; IO (ForeignPtr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Open a socket. No group is joined or created.</p><p>Groups can later be joined by means of <code><a href="Network-PFQ.html#v:joinGroup">joinGroup</a></code> function.</p></div></div><div class="top"><p class="src"><a name="v:openGroup" class="def">openGroup</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></td><td class="doc"><p>ClassMask (e.g., class_default <code>mappend</code> class_control_plane)</p></td></tr><tr><td class="src">-&gt; <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></td><td class="doc"><p>policy for the group</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>caplen</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>number of Rx slots</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>number of Tx slots</p></td></tr><tr><td class="src">-&gt; IO (ForeignPtr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Open the socket and create a new group with the specified parameters.</p><p>If group_policy is <code><a href="Network-PFQ.html#v:policy_undefined">policy_undefined</a></code> no gorup is joined or created.</p></div></div><div class="top"><p class="src"><a name="v:openParam" class="def">openParam</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Network-PFQ.html#t:SocketParams">SocketParams</a></td><td class="doc"><p>parameters</p></td></tr><tr><td class="src">-&gt; IO (ForeignPtr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Open the socket with <code><a href="Network-PFQ.html#t:SocketParams">SocketParams</a></code>.</p><p>Default values are defined as <code><a href="Network-PFQ.html#v:defaultSocketParams">defaultSocketParams</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:close" class="def">close</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO ()</p><div class="doc"><p>Close the socket.</p><p>Release the shared memory, stop kernel threads.</p></div></div><div class="top"><p class="src"><a name="v:enable" class="def">enable</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO ()</p><div class="doc"><p>Enable the socket for packets capture and transmission.</p><p>Allocate the shared memory for socket queues, possibly using
 the Linux HugePages support.
 If the enviroment variable PFQ_HUGEPAGES is set to 0 (or
 PFQ_NO_HUGEPAGES is defined) standard 4K pages are used.</p></div></div><div class="top"><p class="src"><a name="v:disable" class="def">disable</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO ()</p><div class="doc"><p>Disable the socket.</p><p>Release the shared memory, stop kernel threads.</p></div></div><div class="top"><p class="src"><a name="v:getId" class="def">getId</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</p><div class="doc"><p>Return the id of the socket.</p></div></div><div class="top"><p class="src"><a name="v:getGroupId" class="def">getGroupId</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</p><div class="doc"><p>Return the group-id of the socket.</p></div></div><div class="top"><p class="src"><a name="v:isEnabled" class="def">isEnabled</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Bool</p><div class="doc"><p>Check whether the socket is enabled.</p></div></div><h1 id="g:3">Socket control</h1><div class="top"><p class="src"><a name="v:joinGroup" class="def">joinGroup</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; <a href="Network-PFQ.html#t:ClassMask">ClassMask</a></td><td class="doc"><p>class mask</p></td></tr><tr><td class="src">-&gt; <a href="Network-PFQ.html#t:GroupPolicy">GroupPolicy</a></td><td class="doc"><p>group policy</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Join the group with the given class mask and group policy.</p></div></div><div class="top"><p class="src"><a name="v:leaveGroup" class="def">leaveGroup</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Leave the group specified by the group id.</p></div></div><div class="top"><p class="src"><a name="v:bind" class="def">bind</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>device name</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>queue index (or any_queue constant)</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Bind the main group of the socket to the given device/queue.</p></div></div><div class="top"><p class="src"><a name="v:bindGroup" class="def">bindGroup</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>device name</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>queue index (or any_queue constant)</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Bind the group to the given device/queue.</p></div></div><div class="top"><p class="src"><a name="v:unbind" class="def">unbind</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>device name</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>queue index (or any_queue constant)</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Unbind the main group of the socket from the given device/queue.</p></div></div><div class="top"><p class="src"><a name="v:unbindGroup" class="def">unbindGroup</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>device name</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>queue index</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Unbind the group from the given device/queue.</p></div></div><div class="top"><p class="src"><a name="v:egressBind" class="def">egressBind</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>device name</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>queue index</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Set the socket as egress and bind it to the given device/queue.</p><p>The egress socket is be used by groups as network forwarder.</p></div></div><div class="top"><p class="src"><a name="v:egressUnbind" class="def">egressUnbind</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO ()</p><div class="doc"><p>Unset the socket as egress.</p></div></div><h1 id="g:4">Socket parameters</h1><div class="top"><p class="src"><a name="v:timestampingEnable" class="def">timestampingEnable</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Bool</td><td class="doc"><p>toggle: True is on, False off.</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Enable/disable timestamping for packets.</p></div></div><div class="top"><p class="src"><a name="v:isTimestampingEnabled" class="def">isTimestampingEnabled</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Bool</p><div class="doc"><p>Check whether timestamping for packets is enabled.</p></div></div><div class="top"><p class="src"><a name="v:setWeight" class="def">setWeight</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>weight of socket (valid range is [1,16))</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Set the weight of the socket for the steering phase.</p></div></div><div class="top"><p class="src"><a name="v:getWeight" class="def">getWeight</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</p><div class="doc"><p>Return the weight of the socket.</p></div></div><div class="top"><p class="src"><a name="v:setPromisc" class="def">setPromisc</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>device name</p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc"><p>toggle: True is on, False off.</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Set the promiscuous mode for the given interface.</p></div></div><div class="top"><p class="src"><a name="v:getCaplen" class="def">getCaplen</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</p><div class="doc"><p>Return the capture length of packets, in bytes.</p></div></div><div class="top"><p class="src"><a name="v:setCaplen" class="def">setCaplen</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>caplen (bytes)</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specify the capture length of packets, in bytes.</p><p>Capture length must be set before the socket is enabled.</p></div></div><div class="top"><p class="src"><a name="v:getRxSlots" class="def">getRxSlots</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</p><div class="doc"><p>Return the length of the Rx queue, in number of packets.</p></div></div><div class="top"><p class="src"><a name="v:setRxSlots" class="def">setRxSlots</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>number of Rx slots</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specify the length of the Rx queue, in number of packets.</p></div></div><div class="top"><p class="src"><a name="v:getRxSlotSize" class="def">getRxSlotSize</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</p><div class="doc"><p>Return the length of a Rx slot, in bytes.</p></div></div><div class="top"><p class="src"><a name="v:getTxSlots" class="def">getTxSlots</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</p><div class="doc"><p>Return the length of the Tx queue, in number of packets.</p></div></div><div class="top"><p class="src"><a name="v:setTxSlots" class="def">setTxSlots</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>number of Tx slots</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specify the length of the Tx queue, in number of packets.</p></div></div><div class="top"><p class="src"><a name="v:getMaxlen" class="def">getMaxlen</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO Int</p><div class="doc"><p>Return the max transmission length of packets, in bytes.</p></div></div><h1 id="g:5">Packet capture</h1><div class="top"><p class="src"><a name="v:read" class="def">read</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>timeout (msec)</p></td></tr><tr><td class="src">-&gt; IO <a href="Network-PFQ.html#t:NetQueue">NetQueue</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Read packets in place.</p><p>Wait for packets and return a <code><a href="Network-PFQ.html#t:NetQueue">NetQueue</a></code> descriptor.</p><p>The memory of the socket queue is reset at the next read.
 A timeout is specified in microseconds.</p></div></div><div class="top"><p class="src"><a name="v:dispatch" class="def">dispatch</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Network-PFQ.html#t:Callback">Callback</a></td><td class="doc"><p>packet processing function</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>timeout (msec)</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Collect and process packets.</p><p>This function is passed a function <code><a href="Network-PFQ.html#t:Callback">Callback</a></code> which is called on each packet.</p></div></div><div class="top"><p class="src"><a name="v:getPackets" class="def">getPackets</a> :: <a href="Network-PFQ.html#t:NetQueue">NetQueue</a> -&gt; IO [<a href="Network-PFQ.html#t:Packet">Packet</a>]</p><div class="doc"><p>Return the list of <code><a href="Network-PFQ.html#t:Packet">Packet</a></code> stored in the <code><a href="Network-PFQ.html#t:NetQueue">NetQueue</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:getPacketHeader" class="def">getPacketHeader</a> :: <a href="Network-PFQ.html#t:Packet">Packet</a> -&gt; IO <a href="Network-PFQ.html#t:PktHdr">PktHdr</a></p><div class="doc"><p>Return the <code><a href="Network-PFQ.html#t:PktHdr">PktHdr</a></code> of the given <code><a href="Network-PFQ.html#t:Packet">Packet</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:isPacketReady" class="def">isPacketReady</a> :: <a href="Network-PFQ.html#t:Packet">Packet</a> -&gt; IO Bool</p><div class="doc"><p>Check whether the <code><a href="Network-PFQ.html#t:Packet">Packet</a></code> is ready or not.</p></div></div><div class="top"><p class="src"><a name="v:waitForPacket" class="def">waitForPacket</a> :: <a href="Network-PFQ.html#t:Packet">Packet</a> -&gt; IO ()</p><div class="doc"><p>Wait until the <code><a href="Network-PFQ.html#t:Packet">Packet</a></code> is ready.</p></div></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:VlanTag" class="def">VlanTag</a></p><div class="doc"><p>Vlan tag.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:VlanTag" class="def">VlanTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:getVid" class="def">getVid</a> :: CInt</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:VlanTag" class="caption collapser" onclick="toggleSection('i:VlanTag')">Instances</p><div id="section.i:VlanTag" class="show"><table><tr><td class="src clearfix"><span class="inst-left">Eq <a href="Network-PFQ.html#t:VlanTag">VlanTag</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Read <a href="Network-PFQ.html#t:VlanTag">VlanTag</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left">Show <a href="Network-PFQ.html#t:VlanTag">VlanTag</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:vlan_untag" class="def">vlan_untag</a> :: <a href="Network-PFQ.html#t:VlanTag">VlanTag</a></p></div><div class="top"><p class="src"><a name="v:vlan_anytag" class="def">vlan_anytag</a> :: <a href="Network-PFQ.html#t:VlanTag">VlanTag</a></p></div><div class="top"><p class="src"><a name="v:vlanFiltersEnable" class="def">vlanFiltersEnable</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc"><p>toggle: True is on, False off.</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Enable/disable vlan filtering for the given group.</p></div></div><div class="top"><p class="src"><a name="v:vlanSetFilter" class="def">vlanSetFilter</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; <a href="Network-PFQ.html#t:VlanTag">VlanTag</a></td><td class="doc"><p>vlan id</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specify a capture vlan filter for the given group.</p><p>In addition to standard vlan ids, valid ids are also <code><a href="Network-PFQ.html#v:vlan_untag">vlan_untag</a></code> and <code><a href="Network-PFQ.html#v:vlan_anytag">vlan_anytag</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:vlanResetFilter" class="def">vlanResetFilter</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; <a href="Network-PFQ.html#t:VlanTag">VlanTag</a></td><td class="doc"><p>vlan id</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Reset the vlan filter for the given group.</p></div></div><h1 id="g:6">Packet transmission</h1><div class="top"><p class="src"><a name="v:send" class="def">send</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; ByteString</td><td class="doc"><p>bytes of packet</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>copies</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>fhint</p></td></tr><tr><td class="src">-&gt; IO Bool</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Store the packet and transmit the packets in the queue.</p><p>The queue is flushed every fhint packets.
 Requires the socket is bound for transmission to a net device and queue.
 See <code><a href="Network-PFQ.html#v:bindTx">bindTx</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:sendTo" class="def">sendTo</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; ByteString</td><td class="doc"><p>bytes of packet</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>ifindex</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>qindex</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>copies</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>fhint</p></td></tr><tr><td class="src">-&gt; IO Bool</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Store the packet and transmit the packets in the queue.</p><p>The queue is flushed every fhint packets.</p></div></div><div class="top"><p class="src"><a name="v:sendAsync" class="def">sendAsync</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; ByteString</td><td class="doc"><p>bytes of packet</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>copies</p></td></tr><tr><td class="src">-&gt; IO Bool</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Transmit the packet asynchronously.</p><p>The transmission is handled by PFQ kernel threads.
 Requires the socket is bound for transmission to one (or multiple) PFQ kernel threads.
 See <code><a href="Network-PFQ.html#v:bindTx">bindTx</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:sendAt" class="def">sendAt</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; ByteString</td><td class="doc"><p>bytes of packet</p></td></tr><tr><td class="src">-&gt; TimeSpec</td><td class="doc"><p>active timestamp</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>copies</p></td></tr><tr><td class="src">-&gt; IO Bool</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Transmit the packet asynchronously.</p><p>The transmission takes place asynchronously at the given Timespec time.
 Requires the socket is bound for transmission to one (or multiple) PFQ kernel threads.
 See <code><a href="Network-PFQ.html#v:bindTx">bindTx</a></code>.</p></div></div><div class="top"><p class="src"><a name="v:transmitQueue" class="def">transmitQueue</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>queue index (0 is sync tx queue)</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Flush the Tx queue(s)</p><p>Transmit the packets in the Tx queues of the socket.</p></div></div><div class="top"><p class="src"><a name="v:bindTx" class="def">bindTx</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>device name</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>hw queue index</p></td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>PFQ thread id (number)</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Bind the socket for transmission to the given device name and queue.</p></div></div><div class="top"><p class="src"><a name="v:unbindTx" class="def">unbindTx</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO ()</p><div class="doc"><p>Unbind the socket for transmission.</p><p>Unbind the socket for transmission from any device/queue.</p></div></div><h1 id="g:7">pfq-lang</h1><div class="top"><p class="src"><a name="v:setGroupComputation" class="def">setGroupComputation</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; <a href="Network-PFQ-Lang.html#t:Function">Function</a> (<a href="Network-PFQ-Lang.html#t:Qbuff">Qbuff</a> -&gt; <a href="Network-PFQ-Lang.html#t:Action">Action</a> <a href="Network-PFQ-Lang.html#t:Qbuff">Qbuff</a>)</td><td class="doc"><p>expression (pfq-Lang)</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specify a functional computation for the given group.</p><p>The functional computation is specified as a pfq-lang expression.</p></div></div><div class="top"><p class="src"><a name="v:setGroupComputationFromString" class="def">setGroupComputationFromString</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>pfq-lang expression</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specify a functional computation for the given group, as pfq-lang program from string.</p></div></div><div class="top"><p class="src"><a name="v:setGroupComputationFromFile" class="def">setGroupComputationFromFile</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; FilePath</td><td class="doc"><p>pfq-lang file</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specify a functional computation for the given group, as pfq-lang program from file.</p></div></div><div class="top"><p class="src"><a name="v:setGroupComputationFromDescr" class="def">setGroupComputationFromDescr</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; [<a href="Network-PFQ-Lang.html#t:FunctionDescr">FunctionDescr</a>]</td><td class="doc"><p>expression (pfq-lang)</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specify a functional computation for the given group.</p><p>The functional computation is specified as a list of FuncitonDescr.</p></div></div><div class="top"><p class="src"><a name="v:setGroupComputationFromJSON" class="def">setGroupComputationFromJSON</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>decode (json) :: [FunctionDesc]</p></td></tr><tr><td class="src">-&gt; IO ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Specify a functional computation for the given group, from JSON description.</p></div></div><h1 id="g:8">Statistics and counters</h1><div class="top"><p class="src"><a name="v:getStats" class="def">getStats</a> :: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a> -&gt; IO <a href="Network-PFQ.html#t:Statistics">Statistics</a></p><div class="doc"><p>Return the socket statistics.</p></div></div><div class="top"><p class="src"><a name="v:getGroupStats" class="def">getGroupStats</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; IO <a href="Network-PFQ.html#t:Statistics">Statistics</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Return the statistics of the given group.</p></div></div><div class="top"><p class="src"><a name="v:getGroupCounters" class="def">getGroupCounters</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: Ptr <a href="Network-PFQ.html#t:PFqTag">PFqTag</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Int</td><td class="doc"><p>group id</p></td></tr><tr><td class="src">-&gt; IO Counters</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Return the set of counters of the given group.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>